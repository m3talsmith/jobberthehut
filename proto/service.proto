syntax = "proto3";
package jobber;

message Job {
    int64 id = 1;
    string command = 2;
    string created_at = 4;
    bool finished = 6;
}

message StartJobRequest {
    string command = 1;
    bool tail = 2;
}

message StartJobResponse {
    Job job = 1;
    string error = 2;
}

message GetJobsRequest {
}

message GetJobsResponse {
    repeated Job jobs = 1;
    string error = 2;
}

message GetJobLogRequest {
    int64 job_id = 1;
    bool tail = 2;
}

message GetJobLogResponse {
    string log = 1;
    string error = 2;
}

message StopJobRequest {
    int64 job_id = 1;
}

message StopJobResponse {
    string error = 1;
}

service Jobber {
    rpc StartJob(StartJobRequest) returns (StartJobResponse);
    rpc GetJobs(GetJobsRequest) returns (GetJobsResponse);
    rpc GetJobLog(GetJobLogRequest) returns (GetJobLogResponse);
    rpc StopJob(StopJobRequest) returns (StopJobResponse);
}